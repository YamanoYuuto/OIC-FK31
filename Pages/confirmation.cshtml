@page "/confirmation/{Date}"
@model WebApplication4.Pages.confirmationModel

@{
    ViewData["Title"] = "予約情報";
}

<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>予約情報 - Zone Booker</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/confirmation.css" />
</head>
<body>
    <main class="container mt-5">
        <h2 class="text-center mb-4">予約情報</h2>

        <div class="mb-4 text-center">
            <a href="/EditReservation" class="btn btn-outline-secondary">戻る</a>
        </div>

        <!-- 予約情報セクション -->
        <section class="reservation-section mb-4">
            <h3 class="mb-3">予約情報</h3>
            <div id="reservationInfo" class="info-box p-3 border rounded">
                <p><strong>予約日 @Model.starttime.ToString("f") ～ @Model.endtime.ToString("f")</strong></p>
            </div>
        </section>

        <!-- 氏名・連絡先セクション -->
        <section class="personal-section mb-4">
            <h3 class="mb-3">予約者情報</h3>
            <div id="personalInfo" class="info-box p-3 border rounded">
                <p><strong>氏名:@Model.last_name @Model.first_name</strong></p>
                <p><strong>メールアドレス:@Model.email</strong></p>
                <p><strong>電話番号:@Model.phone</strong></p>
            </div>
        </section>

        <!-- 住所情報セクション -->
        <section class="address-section mb-4">
            <h3 class="mb-3">住所情報</h3>
            <div id="addressInfo" class="info-box p-3 border rounded">
                <p><strong>郵便番号:@Model.postal_code</strong></p>
                <p><strong>住所:@Model.prefecture @Model.city @Model.address</strong></p>
                <p><strong>建物名・部屋番号:@Model.building</strong></p>
            </div>
        </section>

        <!-- 確定ボタン -->
        <div class="text-center">
            <form  method="post">
                <button id="confirmButton" class="btn btn-primary">予約確定</button>
            </form>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const reservation = JSON.parse(localStorage.getItem('reservationInfo'));

            if (reservation) {
                document.getElementById('reservationInfo').innerHTML = `
                            <p><strong>予約日:</strong> ${reservation.datetime}</p>
                        `;
                document.getElementById('personalInfo').innerHTML = `
            <p><strong>氏名:</strong> ${reservation.fastname} ${reservation.lastname}</p>
            <p><strong>メールアドレス:</strong> ${reservation.email}</p>
            <p><strong>電話番号:</strong> ${reservation.phone}</p>
        `;

                document.getElementById('addressInfo').innerHTML = `
            <p><strong>郵便番号:</strong> ${reservation.postal_code}</p>
            <p><strong>住所:</strong> ${reservation.prefecture} ${reservation.city} ${reservation.address}</p>
            <p><strong>建物名・部屋番号:</strong> ${reservation.building}</p>
        `;

            } else {
                document.getElementById('reservationInfo').innerHTML = '<p>予約情報が見つかりません</p>';
                document.getElementById('personalInfo').innerHTML = '<p>予約者情報が見つかりません</p>';
                document.getElementById('addressInfo').innerHTML = '<p>住所情報が見つかりません</p>';
            }
        });


        // document.getElementById('confirmButton').addEventListener("click", function () {
        //     Swal.fire({
        //         title: "予約が確定しました",
        //         icon: "success",
        //         confirmButtonText: "OK"
        //     }).then(() => {
        //         window.location.href = "/Thank";
        //     });
        // });
    </script>
</body>
</html>
